# 第6课　用通配符进行过滤
## 6.1 LIKE操作符
通配符（wildcard） 用来匹配值的一部分的特殊字符。
搜索模式（search pattern） 由字面值、通配符或两者组合构成的搜索条件。
谓词（predicate） 操作符何时不是操作符？答案是，它作为谓词时。从技术上说，LIKE 是谓词而不是操作符。虽然最终的结果是相同的，但应该对此术语有所了解，以免在SQL文献或手册中遇到此术语时不知所云。
通配符搜索只能用于文本字段（字符串），非文本数据类型字段不能使用通配符搜索。
### 百分号（%）通配符
最常使用的通配符是百分号（% ）。在搜索串中，% 表示任何字符出现任意次数。
最常使用的通配符是百分号（% ）。在搜索串中，% 表示任何字符出现任意次数。
通配符也可以出现在搜索模式的中间，有一种情况下把通配符放在搜索模式中间是很有用的，就是根据邮件地址的一部分来查找电子邮件，例如WHERE email LIKE 'b%@forta.com' 。
> 请注意后面所跟的空格
> 包括Access在内的许多DBMS都用空格来填补字段的内容。例如，如果某列有50个字符，而存储的文本为Fish bean bag toy （17个字符），则为填满该列需要在文本后附加33个空格。这样做一般对数据及其使用没有影响，但是可能对上述SQL语句有负面影响。子句WHERE prod_name LIKE 'F%y' 只匹配以F 开头、以y 结尾的prod_name 。如果值后面跟空格，则不是以y 结尾，所以Fish bean bag toy 就不会检索出来。简单的解决办法是给搜索模式再增加一个% 号：'F%y%' 还匹配y 之后的字符（或空格）。更好的解决办法是用函数去掉空格。

### 下划线（\_）通配符
另一个有用的通配符是下划线（\_ ）。下划线的用途与% 一样，但它只匹配单个字符，而不是多个字符。
### 方括号（[ ]）通配符
方括号（[] ）通配符用来指定一个字符集，它必须匹配指定位置（通配符的位置）的一个字符。此通配符可以用前缀字符^ （脱字号）来否定。
> 并不总是支持集合
> 与前面描述的通配符不一样，并不是所有DBMS都支持用来创建集合的[] 。只有微软的Access和SQL Server支持集合。为确定你使用的DBMS是否支持集合，请参阅相应的文档。

```sql
--找出所有名字以J 或M 起头的联系人
SELECT cust_contact
FROM Customers
WHERE cust_contact LIKE '[JM]%'
ORDER BY cust_contact;
```

## 6.2 使用通配符的技巧
通配符搜索一般比前面讨论的其他搜索要耗费更长的处理时间。给出一些使用通配符时要记住的技巧：
* 不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。
* 在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处。把通配符置于开始处，搜索起来是最慢的。
* 仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。